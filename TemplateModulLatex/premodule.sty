\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{premodule}[2025/02/18 Template Modul Latex untuk Modul Lab USK]

% VARIABLE
\newcommand{\matakuliah}{Pengenalan Tugas Akhir Informatika}
\newcommand{\dosen}{Muhammad Mahathir}
\newcommand{\jurusan}{Jurusan Informatika}
\newcommand{\universitas}{Universitas Syiah Kuala}
% Nama Asisten
\newcommand{\asistensatu}{Muhammad Mahathir}
\newcommand{\asistendua}{-}

% Setting Ukuran Halaman
\RequirePackage{geometry}
\geometry{
    a4paper,
    left=25mm,
    right=25mm,
    top=25mm,
    bottom=25mm
}

% Setting Spacing dan Paragraph
\RequirePackage{setspace}
\setstretch{1.12}                    % Line spacing sedang
\setlength{\parskip}{4pt plus 1.5pt minus 0.5pt}   % Jarak antar paragraf sedang
\setlength{\parindent}{0pt}          % Hilangkan indentasi paragraf

% Setting untuk section spacing
\RequirePackage{titlesec}
\titlespacing*{\section}{0pt}{10pt plus 3pt minus 1.5pt}{6pt plus 1.5pt minus 1pt}
\titlespacing*{\subsection}{0pt}{8pt plus 2.5pt minus 1.5pt}{4pt plus 1.5pt minus 0.5pt}
\titlespacing*{\subsubsection}{0pt}{6pt plus 1.5pt minus 1pt}{3pt plus 1pt minus 0.5pt}

% Setting Header dan Footer
\newcommand{\updatetitle}{TITLE HERE (UPDATE THIS)}
\RequirePackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\lhead{\updatetitle}
\rfoot{\footnotesize Page \thepage}
\lfoot{\footnotesize \dosen \newline \jurusan\space \universitas \newline Disusun oleh: \asistensatu, \asistendua}
\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}

% Setting Warna
\RequirePackage{xcolor}
\RequirePackage{tabularx}
\RequirePackage{booktabs}
% \RequirePackage[T1]{fontenc} % untuk pdflatex
% \RequirePackage[utf8]{inputenc} % untuk pdflatex
\RequirePackage{fontspec}   % hanya untuk XeLaTeX/LuaLaTeX
\RequirePackage{amssymb}
\RequirePackage{float}
\RequirePackage{amsmath}
\RequirePackage{amsfonts}

% Warna untuk lstlisting
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

% Setting untuk lstlisting dengan spacing yang lebih baik
\RequirePackage{listings}
\lstdefinestyle{python}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    frame=single,                    % Frame di sekitar code block
    frameround=tttt,                 % Rounded corners
    rulecolor=\color{codegray},      % Warna frame
    aboveskip=7pt,                   % Space di atas code block (sedang)
    belowskip=7pt,                   % Space di bawah code block (sedang)
    xleftmargin=10pt,                % Margin kiri
    xrightmargin=10pt                % Margin kanan
}

\lstdefinestyle{bash}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    frame=single,                    % Frame di sekitar code block
    frameround=tttt,                 % Rounded corners
    rulecolor=\color{codegray},      % Warna frame
    aboveskip=7pt,                   % Space di atas code block (sedang)
    belowskip=7pt,                   % Space di bawah code block (sedang)
    xleftmargin=10pt,                % Margin kiri
    xrightmargin=10pt                % Margin kanan
}

% Setting untuk enumerate dan itemize spacing
\RequirePackage{enumitem}
\setlist[enumerate]{
    itemsep=2pt,
    parsep=2pt,
    topsep=4pt,
    partopsep=2pt
}
\setlist[itemize]{
    itemsep=2pt,
    parsep=2pt,
    topsep=4pt,
    partopsep=2pt
}

% Perbaikan untuk spacing di sekitar environments
\RequirePackage{etoolbox}
\BeforeBeginEnvironment{lstlisting}{\vspace{5pt}}
\AfterEndEnvironment{lstlisting}{\vspace{5pt}}

% Custom command untuk text yang lebih rapi
\newcommand{\codeinline}[1]{\texttt{\small #1}}

% Setting untuk table of contents (jika diperlukan)
\RequirePackage{tocloft}
\setlength{\cftbeforesecskip}{3pt}
\setlength{\cftbeforesubsecskip}{2pt}